(window.webpackJsonp=window.webpackJsonp||[]).push([[2],{429:function(t,e,n){"use strict";n.r(e),n.d(e,"default",(function(){return w}));var r=n(0),o=n.n(r),i=n(66),s=n(20),a=n.n(s),u=n(40),l=n(16),c=n(561),p=n.n(c),h=n(168),f=n.n(h),b=n(84);function v(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function y(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function d(t){return(d="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function m(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function g(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function O(t,e,n){return e&&g(t.prototype,e),n&&g(t,n),t}function k(t,e){return!e||"object"!==d(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function S(t){return(S=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function j(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&E(t,e)}function E(t,e){return(E=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var w=function(t){function e(){var t;return m(this,e),(t=k(this,S(e).call(this))).state={hidden:!1},t}return j(e,t),O(e,[{key:"isGuid",value:function(t){if(null==t)return!1;"{"===t[0]&&(t=t.substring(1,t.length-1));return/^[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$/i.test(t)}},{key:"componentWillMount",value:function(){this.isGuid(this.props.id)||(this.pubSubToken=a.a.subscribe(this.props.id,this.onIncomingEvent.bind(this)))}},{key:"onIncomingEvent",value:function(t,e){if("removeElement"===e.type){if("input"==this.props.tag)f()("#".concat(this.props.id))[0].parentElement.remove();this.setState({hidden:!0})}}},{key:"componentDidUpdate",value:function(){this.state.hidden&&null!=this.pubSubToken&&a.a.unsubscribe(this.pubSubToken)}},{key:"componentWillUnmount",value:function(){null!=this.pubSubToken&&a.a.unsubscribe(this.pubSubToken)}},{key:"render",value:function(){return this.state.hidden?null:o.a.createElement(C,this.props)}}]),e}(o.a.Component),C=function(t){function e(t){var n;return m(this,e),(n=k(this,S(e).call(this,t))).state={content:t.content,tag:t.tag,attributes:t.attributes,events:t.events,loading:!0,hasError:!1,errorMessage:""},n}return j(e,t),O(e,[{key:"loadData",value:function(){Object(u.b)("/api/internal/component/element/"+this.props.id,function(t){t.error?this.setState({hasError:!0,errorMessage:t.error.message}):this.setState({content:t,loading:!1})}.bind(this))}},{key:"componentDidCatch",value:function(t,e){this.setState({hasError:!0,errorMessage:t.message})}},{key:"componentWillMount",value:function(){this.pubSubToken=a.a.subscribe(this.props.id,this.onIncomingEvent.bind(this)),this.props.hasCallback?this.loadData():this.props.js?f.a.getScript(Object(l.a)()+"/api/internal/javascript/"+this.props.js,function(){this.setState({loading:!1})}.bind(this)):this.setState({loading:!1})}},{key:"onTextboxChanged",value:function(t){var e=t.target.value;this.state.attributes.value=e,this.setState({attributes:this.state.attributes})}},{key:"onCheckboxChanged",value:function(t){var e=t.target.value;e=t.target.checked,this.state.attributes.checked=e,this.setState({attributes:this.state.attributes});for(var n=0;n<this.state.events.length;n++)if("onChange"===this.state.events[n].event){var r=this.state.events[n];a.a.publish("element-event",{type:"clientEvent",eventId:r.id,eventName:"onChange",eventData:e})}}},{key:"componentWillUnmount",value:function(){if(!this.props.preventUnregister){if(null!=this.state.events)for(var t=0;t<this.state.events.length;t++)a.a.publish("element-event",{type:"unregisterEvent",eventId:this.state.events[t].id});this.props.hasCallback&&a.a.publish("element-event",{type:"unregisterEvent",eventId:this.props.id})}a.a.unsubscribe(this.pubSubToken)}},{key:"onIncomingEvent",value:function(t,e){if("setState"===e.type)this.setState(e.state);else if("requestState"===e.type)Object(u.c)("/api/internal/component/element/sessionState/".concat(e.requestId),this.state);else if("removeElement"===e.type)this.setState({hidden:!0});else if("addElement"===e.type){var n=this.state.content;null==n&&(n=[]),n=n.concat(e.elements),this.setState({content:n})}else"clearElement"===e.type?this.setState({content:null}):"syncElement"===e.type&&this.loadData()}},{key:"onUserEvent",value:function(t,e){var n=null,r=null;if("select"===this.state.tag){if(r=new Array,this.refs.element.selectedOptions){for(var o in this.refs.element.selectedOptions)if(!isNaN(o)){var i=this.refs.element.selectedOptions[o].value;r.push(i)}}else r.push(this.refs.element.value);r=1===r.length?r[0]:JSON.stringify(r);for(var s=0;s<this.state.events.length;s++)"onChange"===this.state.events[s].event&&(t=this.state.events[s]);n="onChange"}else n=t.event,null!=(r=e.target.value)&&null!=r.checked&&(r=e.target.checked);this.state.attributes.value=r,this.setState(this.state),a.a.publish("element-event",{type:"clientEvent",eventId:t.id,eventName:n,eventData:r})}},{key:"render",value:function(){if(this.state.hidden)return null;if(this.state.hasError)return o.a.createElement(b.a,{component:{type:"error",message:this.state.errorMessage}});if(this.props.error)return o.a.createElement(b.a,{component:{type:"error",message:this.state.errorMessage}});if(this.state.loading)return o.a.createElement("div",null);if(this.props.js)return Object(i.a)(function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?v(Object(n),!0).forEach((function(e){y(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):v(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}({type:this.props.componentName},this.props.props),this.props.history);var t=null;this.state.content&&this.state.content.map?t=this.state.content.map(function(t){return null!=t.type?Object(i.a)(t,this.props.history):t}.bind(this)):this.state.content&&(t=this.state.content);var e=this.state.attributes;return null==e&&(e={}),null==e.id&&(e.id=this.props.id),null!=this.state.events&&this.state.events.map&&this.state.events.map(function(t){return e[t.event]=function(e){this.onUserEvent(t,e)}.bind(this),null}.bind(this)),"input"===this.state.tag&&("text"!==e.type&&"password"!==e.type||(e.onChange=this.onTextboxChanged.bind(this)),"checkbox"===e.type&&(e.onChange=this.onCheckboxChanged.bind(this))),"textarea"===this.state.tag&&(e.onChange=this.onTextboxChanged.bind(this)),e.ref="element",e.key=this.props.key,this.element=o.a.createElement(this.state.tag,e,t),[this.element,o.a.createElement(p.a,{timeout:1e3*this.props.refreshInterval,enabled:this.props.autoRefresh,callback:this.loadData.bind(this)})]}}]),e}(o.a.Component)},561:function(t,e,n){"use strict";var r=n(562).ReactInterval;r.ReactInterval=r,t.exports=r},562:function(t,e,n){"use strict";var r;function o(t){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function s(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function a(t,e){return!e||"object"!==o(e)&&"function"!=typeof e?l(t):e}function u(t){return(u=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function l(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function c(t,e){return(c=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function p(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}Object.defineProperty(e,"__esModule",{value:!0}),e.ReactInterval=void 0;var h=function(t){function e(){var t,n;i(this,e);for(var r=arguments.length,o=new Array(r),s=0;s<r;s++)o[s]=arguments[s];return p(l(n=a(this,(t=u(e)).call.apply(t,[this].concat(o)))),"callback",(function(){n.timer&&((0,n.props.callback)(),n.start())})),p(l(n),"start",(function(){n.stop();var t=n.props.timeout;n.timer=setTimeout(n.callback,t)})),p(l(n),"stop",(function(){clearTimeout(n.timer),n.timer=null})),p(l(n),"render",(function(){return!1})),n}var n,r,o;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&c(t,e)}(e,t),n=e,(r=[{key:"componentDidMount",value:function(){this.props.enabled&&this.start()}},{key:"shouldComponentUpdate",value:function(t){var e=t.timeout,n=t.callback,r=t.enabled,o=this.props,i=o.timeout,s=o.callback,a=o.enabled;return i!==e||s!==n||a!==r}},{key:"componentDidUpdate",value:function(t){var e=t.enabled,n=t.timeout,r=this.props,o=r.timeout,i=r.enabled;i===e&&o===n||(i?this.start():this.stop())}},{key:"componentWillUnmount",value:function(){this.stop()}}])&&s(n.prototype,r),o&&s(n,o),e}(((r=n(0))&&r.__esModule?r:{default:r}).default.Component);e.ReactInterval=h,p(h,"defaultProps",{enabled:!1,timeout:1e3})}}]);
//# sourceMappingURL=ud-element.98a896abfe1b3e997f02.bundle.map