{"version":3,"sources":["webpack:///./src/app/ud-element.jsx","webpack:///./node_modules/react-interval/lib/index.js","webpack:///./node_modules/react-interval/lib/Component.js"],"names":["UdElement","state","hidden","str","substring","length","test","this","isGuid","props","id","pubSubToken","PubSub","subscribe","onIncomingEvent","bind","eventName","event","type","tag","$","parentElement","remove","setState","unsubscribe","UDElementContent","React","Component","content","attributes","events","loading","hasError","errorMessage","fetchGet","data","error","message","info","hasCallback","loadData","js","getScript","getApiPath","e","val","target","value","checked","i","publish","eventId","eventData","preventUnregister","fetchPost","requestId","concat","elements","Array","refs","element","selectedOptions","item","isNaN","push","JSON","stringify","component","renderComponent","componentName","history","children","map","x","onUserEvent","onChange","onTextboxChanged","onCheckboxChanged","ref","key","createElement","timeout","refreshInterval","enabled","autoRefresh","callback","ReactInterval","module","exports","obj","_typeof","Symbol","iterator","constructor","prototype","_classCallCheck","instance","Constructor","TypeError","_defineProperties","descriptor","enumerable","configurable","writable","Object","defineProperty","_possibleConstructorReturn","self","call","_assertThisInitialized","_getPrototypeOf","o","setPrototypeOf","getPrototypeOf","__proto__","ReferenceError","_setPrototypeOf","p","_defineProperty","_React$Component","_getPrototypeOf2","_this","_len","arguments","args","_key","apply","timer","start","stop","setTimeout","clearTimeout","protoProps","staticProps","subClass","superClass","create","_inherits","_ref","_this$props","timeout1","callback1","enabled1","_ref2","_this$props2","__esModule"],"mappings":"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","file":"ud-element.98a896abfe1b3e997f02.bundle.js","sourcesContent":["import React from 'react';\r\nimport renderComponent from './services/render-service.jsx';\r\nimport PubSub from 'pubsub-js';\r\nimport { fetchGet, fetchPost } from './services/fetch-service.jsx';\r\nimport { getApiPath } from 'config';\r\nimport ReactInterval from 'react-interval';\r\nimport $ from 'jquery';\r\nimport LazyElement from './basics/lazy-element.jsx';\r\n\r\nexport default class UdElement extends React.Component {\r\n    constructor() {\r\n        super();\r\n\r\n        this.state = {\r\n            hidden: false\r\n        }\r\n    }\r\n\r\n    isGuid(str) {\r\n        if (str == null) { return false }\r\n\r\n        if (str[0] === \"{\") {\r\n            str = str.substring(1, str.length - 1);\r\n        }\r\n        var regexGuid = /^(\\{){0,1}[0-9a-fA-F]{8}\\-[0-9a-fA-F]{4}\\-[0-9a-fA-F]{4}\\-[0-9a-fA-F]{4}\\-[0-9a-fA-F]{12}(\\}){0,1}$/gi;\r\n        var regexGuid = /^[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$/i;\r\n        return regexGuid.test(str);\r\n    }\r\n\r\n    componentWillMount() {\r\n        if (!this.isGuid(this.props.id)) {\r\n            this.pubSubToken = PubSub.subscribe(this.props.id, this.onIncomingEvent.bind(this));\r\n        }\r\n    }\r\n\r\n    onIncomingEvent(eventName, event) {\r\n        if (event.type === \"removeElement\") {\r\n            if (this.props.tag == 'input') {\r\n                let inputComp = $(`#${this.props.id}`)\r\n                inputComp[0].parentElement.remove()\r\n            }\r\n            this.setState({\r\n                hidden: true\r\n            })\r\n        }\r\n    }\r\n\r\n    componentDidUpdate() {\r\n        if (this.state.hidden && this.pubSubToken != null) {\r\n            PubSub.unsubscribe(this.pubSubToken);\r\n        }\r\n    }\r\n\r\n    componentWillUnmount() {\r\n        if (this.pubSubToken != null) {\r\n            PubSub.unsubscribe(this.pubSubToken);\r\n        }\r\n    }\r\n\r\n    render() {\r\n        if (this.state.hidden) {\r\n            return null;\r\n        }\r\n        return <UDElementContent {...this.props} />\r\n    }\r\n}\r\n\r\nclass UDElementContent extends React.Component {\r\n    constructor(props) {\r\n        super(props);\r\n\r\n        this.state = {\r\n            content: props.content,\r\n            tag: props.tag,\r\n            attributes: props.attributes,\r\n            events: props.events,\r\n            loading: true,\r\n            hasError: false,\r\n            errorMessage: ''\r\n        }\r\n    }\r\n\r\n    loadData() {\r\n        fetchGet(\"/api/internal/component/element/\" + this.props.id, function (data) {\r\n            if (data.error) {\r\n                this.setState({\r\n                    hasError: true,\r\n                    errorMessage: data.error.message\r\n                })\r\n                return;\r\n            }\r\n\r\n            this.setState({\r\n                content: data,\r\n                loading: false\r\n            });\r\n        }.bind(this));\r\n    }\r\n\r\n    componentDidCatch(error, info) {\r\n        this.setState({ hasError: true, errorMessage: error.message });\r\n    }\r\n\r\n    componentWillMount() {\r\n        this.pubSubToken = PubSub.subscribe(this.props.id, this.onIncomingEvent.bind(this));\r\n        if (this.props.hasCallback) {\r\n            this.loadData();\r\n        }\r\n        else {\r\n            if (this.props.js) {\r\n                $.getScript(getApiPath() + \"/api/internal/javascript/\" + this.props.js, function () {\r\n                    this.setState({\r\n                        loading: false\r\n                    })\r\n                }.bind(this));\r\n            }\r\n            else {\r\n                this.setState({\r\n                    loading: false\r\n                })\r\n            }\r\n        }\r\n    }\r\n\r\n    onTextboxChanged(e) {\r\n        var val = e.target.value;\r\n        this.state.attributes.value = val;\r\n\r\n        this.setState({\r\n            attributes: this.state.attributes\r\n        });\r\n    }\r\n\r\n    onCheckboxChanged(e) {\r\n        var val = e.target.value;\r\n        val = e.target.checked;\r\n        this.state.attributes.checked = val;\r\n\r\n        this.setState({\r\n            attributes: this.state.attributes\r\n        });\r\n\r\n        for (var i = 0; i < this.state.events.length; i++) {\r\n            if (this.state.events[i].event === 'onChange') {\r\n\r\n                var event = this.state.events[i];\r\n\r\n                PubSub.publish('element-event', {\r\n                    type: \"clientEvent\",\r\n                    eventId: event.id,\r\n                    eventName: 'onChange',\r\n                    eventData: val\r\n                });\r\n            }\r\n        }\r\n    }\r\n\r\n    componentWillUnmount() {\r\n        if (!this.props.preventUnregister) {\r\n            if (this.state.events != null) {\r\n                for (var i = 0; i < this.state.events.length; i++) {\r\n                    PubSub.publish('element-event', {\r\n                        type: \"unregisterEvent\",\r\n                        eventId: this.state.events[i].id\r\n                    });\r\n                }\r\n            }\r\n\r\n            if (this.props.hasCallback) {\r\n                PubSub.publish('element-event', {\r\n                    type: \"unregisterEvent\",\r\n                    eventId: this.props.id\r\n                });\r\n            }\r\n        }\r\n\r\n        PubSub.unsubscribe(this.pubSubToken);\r\n    }\r\n\r\n    onIncomingEvent(eventName, event) {\r\n        if (event.type === \"setState\") {\r\n            this.setState(event.state);\r\n        }\r\n        else if (event.type === \"requestState\") {\r\n            fetchPost(`/api/internal/component/element/sessionState/${event.requestId}`, this.state);\r\n        } else if (event.type === \"removeElement\") {\r\n\r\n            this.setState({\r\n                hidden: true\r\n            })\r\n        } else if (event.type === \"addElement\") {\r\n\r\n            var content = this.state.content;\r\n            if (content == null) {\r\n                content = []\r\n            }\r\n\r\n            content = content.concat(event.elements);\r\n\r\n            this.setState({\r\n                content\r\n            })\r\n        } else if (event.type === \"clearElement\") {\r\n            this.setState({\r\n                content: null\r\n            })\r\n        } else if (event.type === \"syncElement\") {\r\n            this.loadData();\r\n        }\r\n    }\r\n\r\n    onUserEvent(event, e) {\r\n        var eventName = null;\r\n        var val = null;\r\n        if (this.state.tag === 'select') {\r\n\r\n            val = new Array();\r\n\r\n            if (this.refs.element.selectedOptions) {\r\n                for (var item in this.refs.element.selectedOptions) {\r\n                    if (isNaN(item)) continue;\r\n                    var value = this.refs.element.selectedOptions[item].value;\r\n                    val.push(value);\r\n                }\r\n            }\r\n            else {\r\n                val.push(this.refs.element.value);\r\n            }\r\n\r\n            if (val.length === 1) {\r\n                val = val[0]\r\n            }\r\n            else {\r\n                val = JSON.stringify(val);\r\n            }\r\n\r\n            for (var i = 0; i < this.state.events.length; i++) {\r\n                if (this.state.events[i].event === 'onChange') {\r\n                    event = this.state.events[i];\r\n                }\r\n            }\r\n            eventName = 'onChange'\r\n        }\r\n        else {\r\n            eventName = event.event;\r\n            val = e.target.value;\r\n            if (val != null && val.checked != null) {\r\n                val = e.target.checked;\r\n            }\r\n        }\r\n\r\n        this.state.attributes.value = val;\r\n        this.setState(this.state);\r\n\r\n        PubSub.publish('element-event', {\r\n            type: \"clientEvent\",\r\n            eventId: event.id,\r\n            eventName: eventName,\r\n            eventData: val\r\n        });\r\n    }\r\n\r\n    render() {\r\n        if (this.state.hidden) {\r\n            return null;\r\n        }\r\n\r\n        if (this.state.hasError) {\r\n            return <LazyElement component={{\r\n                type: 'error',\r\n                message: this.state.errorMessage\r\n            }} />\r\n        }\r\n\r\n        if (this.props.error) {\r\n            return <LazyElement component={{\r\n                type: 'error',\r\n                message: this.state.errorMessage\r\n            }} />\r\n        }\r\n\r\n        if (this.state.loading) {\r\n            return <div></div>\r\n        }\r\n\r\n        if (this.props.js) {\r\n            return renderComponent({\r\n                type: this.props.componentName,\r\n                ...this.props.props\r\n            }, this.props.history)\r\n        }\r\n\r\n        var children = null;\r\n\r\n        if (this.state.content && this.state.content.map) {\r\n            children = this.state.content.map(function (x) {\r\n                if (x.type != null) {\r\n                    return renderComponent(x, this.props.history);\r\n                }\r\n                return x;\r\n            }.bind(this));\r\n        }\r\n        else if (this.state.content) {\r\n            children = this.state.content;\r\n        }\r\n\r\n        var attributes = this.state.attributes;\r\n\r\n        if (attributes == null) {\r\n            attributes = {}\r\n        }\r\n\r\n        if (attributes.id == null) {\r\n            attributes.id = this.props.id;\r\n        }\r\n\r\n        if (this.state.events != null && this.state.events.map) {\r\n            this.state.events.map(function (event) {\r\n                attributes[event.event] = function (e) {\r\n                    this.onUserEvent(event, e);\r\n                }.bind(this);\r\n                return null;\r\n            }.bind(this));\r\n        }\r\n\r\n        if (this.state.tag === \"input\") {\r\n            if (attributes.type === \"text\" || attributes.type === \"password\") {\r\n                attributes.onChange = this.onTextboxChanged.bind(this);\r\n            }\r\n\r\n            if (attributes.type === \"checkbox\") {\r\n                attributes.onChange = this.onCheckboxChanged.bind(this);\r\n            }\r\n        }\r\n\r\n        if (this.state.tag === \"textarea\") {\r\n            attributes.onChange = this.onTextboxChanged.bind(this);\r\n        }\r\n\r\n        attributes.ref = 'element';\r\n        attributes.key = this.props.key;\r\n\r\n        this.element = React.createElement(this.state.tag, attributes, children);\r\n\r\n        return [this.element,\r\n        <ReactInterval timeout={this.props.refreshInterval * 1000} enabled={this.props.autoRefresh} callback={this.loadData.bind(this)} />];\r\n    }\r\n}\r\n","\"use strict\";\n\nvar _require = require('./Component'),\n    ReactInterval = _require.ReactInterval;\n\nReactInterval.ReactInterval = ReactInterval;\nmodule.exports = ReactInterval;","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.ReactInterval = void 0;\n\nvar _react = _interopRequireDefault(require(\"react\"));\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { \"default\": obj }; }\n\nfunction _typeof(obj) { if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") { _typeof = function _typeof(obj) { return typeof obj; }; } else { _typeof = function _typeof(obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }; } return _typeof(obj); }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\nfunction _possibleConstructorReturn(self, call) { if (call && (_typeof(call) === \"object\" || typeof call === \"function\")) { return call; } return _assertThisInitialized(self); }\n\nfunction _getPrototypeOf(o) { _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return _getPrototypeOf(o); }\n\nfunction _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function\"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); if (superClass) _setPrototypeOf(subClass, superClass); }\n\nfunction _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nvar ReactInterval =\n/*#__PURE__*/\nfunction (_React$Component) {\n  _inherits(ReactInterval, _React$Component);\n\n  function ReactInterval() {\n    var _getPrototypeOf2;\n\n    var _this;\n\n    _classCallCheck(this, ReactInterval);\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _possibleConstructorReturn(this, (_getPrototypeOf2 = _getPrototypeOf(ReactInterval)).call.apply(_getPrototypeOf2, [this].concat(args)));\n\n    _defineProperty(_assertThisInitialized(_this), \"callback\", function () {\n      if (_this.timer) {\n        var callback = _this.props.callback;\n        callback();\n\n        _this.start();\n      }\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"start\", function () {\n      _this.stop();\n\n      var timeout = _this.props.timeout;\n      _this.timer = setTimeout(_this.callback, timeout);\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"stop\", function () {\n      clearTimeout(_this.timer);\n      _this.timer = null;\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"render\", function () {\n      return false;\n    });\n\n    return _this;\n  }\n\n  _createClass(ReactInterval, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      var enabled = this.props.enabled;\n\n      if (enabled) {\n        this.start();\n      }\n    }\n  }, {\n    key: \"shouldComponentUpdate\",\n    value: function shouldComponentUpdate(_ref) {\n      var timeout = _ref.timeout,\n          callback = _ref.callback,\n          enabled = _ref.enabled;\n      var _this$props = this.props,\n          timeout1 = _this$props.timeout,\n          callback1 = _this$props.callback,\n          enabled1 = _this$props.enabled;\n      return timeout1 !== timeout || callback1 !== callback || enabled1 !== enabled;\n    }\n  }, {\n    key: \"componentDidUpdate\",\n    value: function componentDidUpdate(_ref2) {\n      var enabled = _ref2.enabled,\n          timeout = _ref2.timeout;\n      var _this$props2 = this.props,\n          timeout1 = _this$props2.timeout,\n          enabled1 = _this$props2.enabled;\n\n      if (enabled1 !== enabled || timeout1 !== timeout) {\n        if (enabled1) {\n          this.start();\n        } else {\n          this.stop();\n        }\n      }\n    }\n  }, {\n    key: \"componentWillUnmount\",\n    value: function componentWillUnmount() {\n      this.stop();\n    }\n  }]);\n\n  return ReactInterval;\n}(_react[\"default\"].Component);\n\nexports.ReactInterval = ReactInterval;\n\n_defineProperty(ReactInterval, \"defaultProps\", {\n  enabled: false,\n  timeout: 1000\n});"],"sourceRoot":""}